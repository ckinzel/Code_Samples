simulation_output
    enable all   
	csv_event_output
		file "my_results.csv"
      flush_output enable
    end_csv_event_output
end_simulation_output

csv_event_output
	file "default.csv"
	enable all
end_csv_event_output

platform foo1 WSF_PLATFORM
	side blue
end_platform

platform foo2 WSF_PLATFORM
	side red
end_platform

# Check results
observer 
   enable SIMULATION_COMPLETE
end_observer

script_variables
   Array<string> EXPECTED_CONTENT = Array<string>();
   
   EXPECTED_CONTENT.PushBack("0,PLATFORM_ADDED,foo1,blue,WSF_PLATFORM,,0,0,0,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("0.000000e+00,TEAM_NAME_DEFINITION,foo1,blue");
   EXPECTED_CONTENT.PushBack("0.000000e+00,PLATFORM_INITIALIZED,foo1,blue,WSF_PLATFORM,1.000000e+00,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("0.000000e+00,ROUTER_OPERATIONAL,foo1,blue, Router,default,WSF_COMM_ROUTER,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("0.000000e+00,PLATFORM_ADDED,foo2,red,WSF_PLATFORM,,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("0.000000e+00,TEAM_NAME_DEFINITION,foo2,red");
   EXPECTED_CONTENT.PushBack("0.000000e+00,PLATFORM_INITIALIZED,foo2,red,WSF_PLATFORM,1.000000e+00,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("0.000000e+00,ROUTER_OPERATIONAL,foo2,red, Router,default,WSF_COMM_ROUTER,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("0.000000e+00,NETWORK_ADDED,default,0.1.0.0");
   EXPECTED_CONTENT.PushBack("0.000000e+00,ROUTER_TURNED_ON,foo1,blue, Router,default,WSF_COMM_ROUTER,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("0.000000e+00,ROUTER_TURNED_ON,foo2,red, Router,default,WSF_COMM_ROUTER,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("0.000000e+00,SIMULATION_STARTING,2003,6,1,12,0,0.000000e+00");
   EXPECTED_CONTENT.PushBack("0.000000e+00,ROUTER_TURNED_ON,foo1,blue, Router,default,WSF_COMM_ROUTER,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("0.000000e+00,ROUTER_TURNED_ON,foo2,red, Router,default,WSF_COMM_ROUTER,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("6.000100e+01,SIMULATION_COMPLETE,2003,6,1,12,1,0.000000e+00");
   EXPECTED_CONTENT.PushBack("6.000100e+01,PLATFORM_DELETED,foo1,blue,WSF_PLATFORM,1.000000e+00,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
   EXPECTED_CONTENT.PushBack("6.000100e+01,PLATFORM_DELETED,foo2,red,WSF_PLATFORM,1.000000e+00,0.000000e+00,0.000000e+00,0.00000000e+00,2.23167444e+06,5.97496947e+06,-7.95753188e+02,0.000,0.000,0.000,0.000,0.000,0.000,0.000,465.101,-0.937,0.350,0.000,0.000,0.000,0.000,0.000,0.034,-0.350,-0.937,0.000");
end_script_variables

script void SimulationComplete()

   FileIO file = FileIO();
   file.Open("my_results.csv", "in");
   
   bool success = true;
   
   # Ignore the headers. There should be 98 lines worth of headers.
   int startMatching = 98;
   int lncount = 0;
   string line = file.Readln();
   while(!file.Eof())
   {
	  if(lncount >= startMatching)
	  {
		success = success && (EXPECTED_CONTENT[lncount-startMatching] == line);
      }
   	lncount = lncount + 1;
	line = file.Readln();
   }
   
   if(success)
   {
	writeln("-PASS-");
   }
   else
   {
	writeln("-FAIL-");
   }
   
end_script